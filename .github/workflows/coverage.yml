# ------------------------------------------------------------------------------
# <auto-generated>
#
#     This code was generated.
#
#     - To turn off auto-generation set:
#
#         [GitHubActions (AutoGenerate = false)]
#
#     - To trigger manual generation invoke:
#
#         nuke --generate-configuration GitHubActions_coverage --host GitHubActions
#
# </auto-generated>
# ------------------------------------------------------------------------------

name: coverage

on: [push, pull_request]

jobs:
  ubuntu-latest:
    name: ubuntu-latest
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          submodules: recursive
          fetch-depth: 0
    #   - name: Upload coverage reports to Codecov
    #     uses: codecov/codecov-action@v3
    #     with:
    #       files: ./coverage/coverage.cobertura.xml
    #       flags: unittests
    #       name: codecov-umbrella
    #       fail_ci_if_error: true
    #     env:
    #       CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
      - name: Coveralls
        uses: coverallsapp/github-action@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          COVERALLS_REPO_TOKEN: ${{ secrets.COVERALLS_REPO_TOKEN }}
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          base-path: ./output/test-results
          flag-name: unittests
          parallel: true
          debug: true
